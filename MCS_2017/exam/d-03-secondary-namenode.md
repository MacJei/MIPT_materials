## Назначение Secondary Namenode в HDFS.

_Secondary Namenode_ — компонент хадупа, очень плохо названный. Означает не _Backup Namenode_, а _Checkpoint Namenode_.

Прежде, чем разбираться, что делает _Secondary Namenode_, стоит разобраться, как работает _Namenode_. _Namenode_ — центр всего HDFS. В нем хранится все дерево каталогов файловой системы, метаданные по всем файлам и так далее. Клиентские приложения общаются как раз с _Namenod_'ом, чтобы найти / скопировать / удалить / изменить / ... файл в HDFS.

Очевидно, _Namenode_ — единая точка отказа кластера HDFS. Вся информация на _Namenode_ хранится в RAM, но также и держится на жестких дисках. Таким образом, _Namenode_ пишет информацию на диск:
* _fsimage_ — «снимок» всей файловой системы на момент запуска _Namenod_'a;
* _edit logs_ — логи изменений с момента снимка.

Если _Namenode_ ломается или перезапускается, все логи применяются к _fsimage_, чтобы получить финальную картинку файловой системы до перезапуска. Но в случае очень долгой работы _Namenod_'а без перезапусков, логи разрастаются до огромнейших размеров, и на восстановление файловой системы уйдут долгие часы, что неприемлемо.

_Secondary Namenode_ помогает справиться с проблемой долгого восстановления _Namenod_'a, беря на себя применение логов изменений к _fsimage_.

Схема его работы:
* он регулярно получает логи изменений от _Namenode_ и применяет их к _fsimage_;
* отсылает полученный _fsimage_ в _Namenode_;
* _namenode_ будет использовать новый _fsimage_ в случае перезагрузки;
* таким образом, _Secondary Namenode_, по сути, является checkpoint'ом для _Namenode_.
